# Логирование действий блока #
> Оно сейчас осуществляется вообще? add\_to\_log Если да, то найти все места где есть - если нет - то где надо это сделать (какие действия производит пользователь).
> На данный момент функия логирования используется в следующих местах.
Функция вывода в логи содержится в следующих файлах:

1) пакет ClassRooms
> showhide.php - в лог заносятся два события: "Показ активной аудитории" и "Показ скрытой аудитории".
> addedit.php - в лог добавляются два события: "Добавление аудитории" и "Редактирование аудитории".
> delete.php - в лог заносится событие "Удаление аудитории".

2) пакет Lessontypes
> addedit.php - в лог заносятся два события: "Добавление нового типа занятий" и "Редактирование типа занятия".
> delete.php - в лог заносится событие "Удаление одного типа занятий".

3) пакет Sessions
> addedit.php - в лог заносятся два события: "Планирование новой сессии" и "Редактирование одной сессии".
> delete.php - в лог заносится событие "Удаление сессии".

4) block\_supervised.php - в лог заносится четыре события: "Начата запланированная сессия", "Начата обычная сессия", "Сессия завершена" и "Обновлена активная сессия".



# Показ логов за время урока #
## Примеры современного кода ##
> В качестве образца вывода логов был найден файл, отвечающий за вывод логов посещения сайта пользователями. Логи выводятся в виде таблицы с возможностью фильтра по некоторым параметрам, например, по IP-адресу. Данный файл располагается в папке \moodle\report\log, код данного файла отвечает за вывод логов посещений и произведенных пользователем действий.
## Проект ##
> На данный момент мною были выделены 15 событий, описанные выше. Согласно справке по Moodle, каждую функцию add\_to\_log необходимо преобразовать в Event. Мною были продуманы два способа наследования событий. Первый - наследование по типу события: события добавления, события обновления и события удаления. Второй - события по объектам: действия над аудиториями, действия над типами занятий и действия над сессиями. Второй способ позволяет логично соединить события одного объекта общим предком, но главный минус такого наследования - нет общего кода, я только не уверена насчет функции get\_url. Первый способ наследования избавляет практически полностью от переопределения функции init, так как большая часть кода этой функции при таком разбиении будет вынесена в класс предка. Действительно, как вы и говорили с url имеется проблема, я в среду вам покажу. Я делала свое событие по примеру события в Мудле, url оформила аналогично, но url полностью верно не генерируется