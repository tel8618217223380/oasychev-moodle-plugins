#/bin/sh

SOURCE=$(readlink -f $0)
DIR_SOURCE=$(dirname $SOURCE)
DIR_JLEX=$DIR_SOURCE"/JLexPhp"
DIR_LEMON=$DIR_SOURCE"/PHP_ParserGenerator"
DIR_TARGET=$(dirname $DIR_SOURCE)

echo "Generating lexer..."
cd "$DIR_JLEX"
java JLexPHP.Main ../preg_lexer.lex

echo "Generating parser..."
cd "$DIR_LEMON"
php Main.php

echo "Copying files..."
cd "$DIR_SOURCE"
mv preg_lexer.lex.php $DIR_TARGET
mv preg_parser.php $DIR_TARGET
echo "Done!"
